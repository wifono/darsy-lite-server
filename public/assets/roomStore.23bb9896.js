import{ap as i,aq as t}from"./index.aa0ee168.js";import{api as r}from"./axios.55a7e266.js";localStorage.getItem("accessToken");const c=i("Rooms",{state:()=>({addRoomForm:!1,editRoomForm:!1,configRoomForm:!1,number:null,name:null,capacity:null,rooms:[],room:null,roomId:null,selectedRooms:[],roomForFilter:null,selectedCompany:null}),getters:{roomOptions(){return this.rooms.map(o=>({label:o.name,value:o._id}))},assignedRoomOptions(){var a;const o=JSON.parse(localStorage.getItem("credentials")),e=(a=o==null?void 0:o.user)==null?void 0:a.companyId;return console.log("User companyId:",e),this.rooms.filter(s=>s.companies.includes(e)).map(s=>({label:s.name,value:s._id}))}},actions:{async getRooms(){try{const o=await r.get("room",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});this.rooms=o.data.data}catch(o){t.create({message:"Chyba pri z\xEDskavan\xED miestnost\xED: "+o,color:"warning",position:"top"})}},async getRoom(o){try{const e=await r.get(`room/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});this.room=e.data,this.roomId=o,e.status===200&&(this.editRoomForm=!0)}catch(e){t.create({message:"Chyba pri z\xEDskavan\xED miestnosti: "+e,color:"warning",position:"top"})}},async updateRoom(o){const e={name:this.room.name,number:this.room.number,capacity:this.room.capacity};try{(await r.patch(`room/${o}`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).status===200&&(t.create({message:"Miestnos\u0165 aktualizovan\xE1",color:"positive",position:"top"}),await this.getRooms(),this.editRoomForm=!1)}catch(a){t.create({message:"Chyba pri ukladan\xED miestnosti: "+a,color:"warning",position:"top"})}},async createRoom(){const o={name:this.name,number:this.number,capacity:this.number};try{(await r.post("room",o,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).status===201&&(t.create({message:"Miestnos\u0165 vytvoren\xE1",color:"positive",position:"top"}),await this.getRooms(),this.addRoomForm=!1)}catch(e){t.create({message:"Chyba pri ukladan\xED miestnosti: "+e,color:"warning",position:"top"})}},async deleteRoom(o){try{(await r.delete(`room/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).status===200&&(t.create({message:"Miestnos\u0165 vymazan\xE1",color:"positive",position:"top"}),await this.getRooms())}catch(e){t.create({message:"Chyba pri ukladan\xED miestnosti: "+e,color:"warning",position:"top"})}},async assignRoom(){const o=this.roomId,e={companies:this.selectedCompany.map(a=>a.value)};try{const a=await r.patch(`room?room=${o}&assign=company`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});t.create({message:"Firmy boli \xFAspe\u0161ne priraden\xE9",color:"positive",position:"top"}),await this.getRooms()}catch(a){console.error("Chyba pri prira\u010Fovan\xED firiem:",a),t.create({message:"Chyba pri prira\u010Fovan\xED firiem: "+a.message,color:"warning",position:"top"})}},async removeRoomFromCompany(o,e){try{await r.patch(`room?room=${o}&unassign=${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),t.create({message:"Firma bola \xFAspe\u0161ne odstr\xE1nen\xE1",color:"positive",position:"top"}),await this.getRooms()}catch(a){console.error("Chyba pri odstra\u0148ovan\xED firmy:",a),t.create({message:"Chyba pri odstra\u0148ovan\xED zamestnanca: "+a.message,color:"warning",position:"top"})}}}});export{c as u};
