import{C as g,i as B,j as $,h as b}from"./ClosePopup.c06d644a.js";import{d as N,g as E,e as T,f as A}from"./QCardActions.f27404cf.js";import{o as h,y as v,z as _,B as i,f as e,A as l,E as n,Q as p,u as f,az as z,c as M,F as Z,aJ as D,I as L,aY as R,C as y,D as x,R as J,r as Q,aN as j}from"./index.44e2cc04.js";import{u as F,Q as O}from"./QCard.efe14bd2.js";import{u as V,Q as Y,a as S}from"./companyStore.e7f186e0.js";import{S as G,_ as H,Q as K}from"./MultipleDeleteButton.6f6aa37c.js";import{Q as k,d as U}from"./QForm.7ac48cfa.js";import{Q as W}from"./QScrollArea.12e8c7ba.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.7aa860db.js";import"./QScrollObserver.62b22911.js";const X={class:"add-page add-event dark-page"},ee={style:{display:"flex","align-items":"center","justify-content":"center",gap:"1em"}},oe={__name:"AddCompanyForm",setup(w){const a=V();return F(),h(()=>{a.name="",a.allocatedTimeMonth=""}),(m,o)=>(v(),_("div",X,[i("section",null,[o[2]||(o[2]=i("h2",null,"Prida\u0165 spolo\u010Dnos\u0165",-1)),e(U,{autofocus:"",onSubmit:z(n(a).addCompany,["prevent"])},{default:l(()=>[e(k,{select:"",outlined:"",modelValue:n(a).name,"onUpdate:modelValue":o[0]||(o[0]=s=>n(a).name=s),type:"text",label:m.$t("N\xE1zov spolo\u010Dnosti"),"lazy-rules":"",dark:m.$q.dark.mode,rules:[s=>s&&s.length>0||"Zadajte n\xE1zov udalost"],"hide-bottom-space":""},null,8,["modelValue","label","dark","rules"]),e(k,{modelValue:n(a).allocatedTimeMonth,"onUpdate:modelValue":o[1]||(o[1]=s=>n(a).allocatedTimeMonth=s),outlined:"",type:"number",label:m.$t("Mesa\u010Dn\xFD alokovan\xFD \u010Das (v min\xFAtach)"),"lazy-rules":"",dark:m.$q.dark.mode,"hide-bottom-space":""},null,8,["modelValue","label","dark"]),i("div",ee,[e(p,{color:"positive",icon:"create","text-color":"dark",label:"Vytvori\u0165",type:"submit"}),f(e(p,{color:"grey-5","text-color":"dark",icon:"close",label:"Zatvori\u0165"},null,512),[[g]])])]),_:1},8,["onSubmit"])])]))}},ae={class:"add-page add-event"},te={style:{display:"flex","align-items":"center","justify-content":"center",gap:"1em"}},le={__name:"EditCompanyForm",setup(w){const a=V();return F(),(m,o)=>(v(),_("div",ae,[i("section",null,[o[2]||(o[2]=i("h2",null,"Upravi\u0165 spolo\u010Dnos\u0165",-1)),e(U,{autofocus:"",onSubmit:z(n(a).updateCompany,["prevent"])},{default:l(()=>[e(k,{select:"",outlined:"",modelValue:n(a).company,"onUpdate:modelValue":o[0]||(o[0]=s=>n(a).company=s),type:"text",label:m.$t("N\xE1zov spolo\u010Dnosti"),"lazy-rules":"",dark:m.$q.dark.mode,rules:[s=>s&&s.length>0||"Zadajte n\xE1zov udalost"],"hide-bottom-space":""},null,8,["modelValue","label","dark","rules"]),e(k,{modelValue:n(a).allocatedTimeMonth,"onUpdate:modelValue":o[1]||(o[1]=s=>n(a).allocatedTimeMonth=s),outlined:"",type:"number",label:m.$t("Mesa\u010Dn\xFD alokovan\xFD \u010Das (v min\xFAtach)"),"lazy-rules":"",dark:m.$q.dark.mode,"hide-bottom-space":""},null,8,["modelValue","label","dark"]),i("div",te,[f(e(p,{color:"positive",icon:"create",label:"Vytvori\u0165",type:"submit","text-color":"dark"},null,512),[[g]]),f(e(p,{color:"grey-5","text-color":"dark",icon:"close",label:"Zatvori\u0165"},null,512),[[g]])])]),_:1},8,["onSubmit"])])]))}};const ne={class:"add-page add-event"},se={class:"row",style:{display:"flex",gap:"1em"}},re={__name:"ConfigCompanyForm",setup(w){const a=V();F(),h(async()=>{await a.getEmployees()});const m=M(()=>{const s=a.companyId;if(!s)return[];const u=a.companies.find(d=>d._id===s);return!u||!u.employees?[]:u.employees.map(d=>a.employees.find(C=>C._id===d)).filter(Boolean)}),o=async s=>{const u=a.companyId;!u||(await a.removeEmployeeFromCompany(u,s),await a.getEmployees())};return(s,u)=>(v(),_("div",ne,[i("section",null,[u[1]||(u[1]=i("h2",null,"Pridanie zamestnancov",-1)),e(U,{autofocus:"",onSubmit:z(n(a).assignEmployee,["prevent"])},{default:l(()=>[e(N,{modelValue:n(a).selectedEmployees,"onUpdate:modelValue":u[0]||(u[0]=d=>n(a).selectedEmployees=d),dark:s.$q.dark.mode,multiple:"",options:n(a).employeesSelect,label:"Vyberte zamestnancov",filled:""},null,8,["modelValue","dark","options"]),e(Y,{style:{width:"100%"}},{default:l(()=>[e(W,{style:{height:"200px"}},{default:l(()=>[(v(!0),_(Z,null,D(m.value,d=>f((v(),L(B,{style:{width:"100%",display:"flex","flex-direction":"row","flex-wrap":"wrap"},key:d._id,class:"q-my-sm",clickable:""},{default:l(()=>[e($,{avatar:""},{default:l(()=>[e(R,{color:"primary","text-color":"white"},{default:l(()=>[y(x(d.name[0]),1)]),_:2},1024)]),_:2},1024),e($,null,{default:l(()=>[e(E,null,{default:l(()=>[y(x(d.name),1)]),_:2},1024),e(E,{caption:""},{default:l(()=>[y(x(d.email),1)]),_:2},1024)]),_:2},1024),e($,{side:""},{default:l(()=>[e(p,{flat:"",dense:"",icon:"delete",color:"negative",onClick:C=>o(d._id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[J]])),128))]),_:1})]),_:1}),i("div",se,[e(p,{color:"positive",icon:"create",label:"Ulo\u017Ei\u0165","text-color":"dark",type:"submit"}),f(e(p,{color:"grey-5","text-color":"dark",icon:"close",label:"Zatvori\u0165"},null,512),[[g]])])]),_:1},8,["onSubmit"])])]))}};var de=P(re,[["__scopeId","data-v-1d660319"]]);const ie={class:"reservation-page"},me={style:{"margin-top":"0.7em"}},ue={style:{display:"flex","flex-direction":"row-reverse","align-items":"center","justify-content":"space-between"}},pe={style:{display:"flex","align-items":"center",gap:"1em"}},ce={style:{width:"5em"}},ye={__name:"CompanyPage",setup(w){const a=Q(!1),m=Q(null),o=V(),s=c=>{o.companyId=c,o.configCompanyForm=!0},u=c=>{m.value=c,a.value=!0},d=Q(""),C=M(()=>o.companies.filter(c=>Object.values(c).some(t=>String(t).toLowerCase().includes(d.value.toLowerCase())))),q=[{name:"name",required:!0,label:"N\xE1zov spolo\u010Dnosti",align:"left",field:c=>c.name,format:c=>`${c}`,sortable:!0},{name:"time",align:"left",label:"Mesa\u010Dn\xFD alokovan\xFD \u010Das (min)",field:"time",sortable:!0},{name:"actions",label:"Akcie",align:"center",field:"actions"}];return h(async()=>{j.show(),await o.getCompanies(),await o.getEmployees(),j.hide()}),(c,t)=>(v(),_("div",ie,[e(b,{modelValue:n(o).addCompanyForm,"onUpdate:modelValue":t[0]||(t[0]=r=>n(o).addCompanyForm=r)},{default:l(()=>[e(oe)]),_:1},8,["modelValue"]),e(b,{modelValue:n(o).editCompanyForm,"onUpdate:modelValue":t[1]||(t[1]=r=>n(o).editCompanyForm=r)},{default:l(()=>[e(le)]),_:1},8,["modelValue"]),e(b,{modelValue:n(o).configCompanyForm,"onUpdate:modelValue":t[2]||(t[2]=r=>n(o).configCompanyForm=r)},{default:l(()=>[e(de)]),_:1},8,["modelValue"]),e(b,{modelValue:a.value,"onUpdate:modelValue":t[4]||(t[4]=r=>a.value=r)},{default:l(()=>[e(O,{dark:"",style:{width:"20em","box-shadow":"none"}},{default:l(()=>[e(T,{style:{"text-align":"center","padding-top":"2em"}},{default:l(()=>t[8]||(t[8]=[y(" Naozaj si prajete vymaza\u0165 spolo\u010Dnos\u0165? ")])),_:1}),e(A,{align:"center"},{default:l(()=>[f(e(p,{flat:"",label:"Vymaza\u0165",onClick:t[3]||(t[3]=r=>n(o).deleteCompany(m.value)),color:"negative"},null,512),[[g]]),f(e(p,{flat:"",label:"Zru\u0161i\u0165",color:"primary"},null,512),[[g]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t[12]||(t[12]=i("header",null,[i("div",{style:{display:"flex","align-items":"center","justify-content":"flex-end",flex:"1",gap:"1em"},class:"right-side"})],-1)),i("section",me,[i("header",ue,[e(G,{search:d.value,"onUpdate:search":t[5]||(t[5]=r=>d.value=r)},null,8,["search"]),i("div",pe,[e(p,{color:"positive",icon:"add",label:"Prida\u0165 spolo\u010Dnos\u0165","text-color":"dark",style:{height:"1em","margin-left":"0.2em"},onClick:t[6]||(t[6]=r=>n(o).addCompanyForm=!0)}),e(H,{name:"company","selected-items":n(o).selectedCompanies},null,8,["selected-items"])])]),e(K,{style:{"margin-top":"1em","box-shadow":"none"},rows:C.value,columns:q,dark:c.$q.dark.mode,"row-key":"name",selection:"multiple","rows-per-page-options":[10,20,30,40,50],selected:n(o).selectedCompanies,"onUpdate:selected":t[7]||(t[7]=r=>n(o).selectedCompanies=r)},{"body-cell-actions":l(r=>[i("td",ce,[e(p,{color:"primary",icon:"edit",style:{"margin-right":"0.5em"},onClick:I=>n(o).getCompany(r.row._id)},{default:l(()=>[e(S,{anchor:"top middle",class:"bg-blue",self:"center middle"},{default:l(()=>t[9]||(t[9]=[y(" Upravi\u0165 spolo\u010Dnos\u0165 ")])),_:1})]),_:2},1032,["onClick"]),e(p,{color:"orange",icon:"person",style:{"margin-right":"0.5em"},onClick:I=>s(r.row._id)},{default:l(()=>[e(S,{anchor:"top middle",class:"bg-orange",self:"center middle"},{default:l(()=>t[10]||(t[10]=[y(" Prida\u0165 zamestnancov ")])),_:1})]),_:2},1032,["onClick"]),e(p,{color:"negative",icon:"delete",onClick:I=>u(r.row._id)},{default:l(()=>[e(S,{anchor:"top middle",class:"bg-red",self:"center middle"},{default:l(()=>t[11]||(t[11]=[y(" Vymaza\u0165 spolo\u010Dnos\u0165 ")])),_:1})]),_:2},1032,["onClick"])])]),_:1},8,["rows","dark","selected"])])]))}};var Qe=P(ye,[["__scopeId","data-v-c27807a6"]]);export{Qe as default};
