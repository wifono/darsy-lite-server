import{ap as n,aq as a}from"./index.aa0ee168.js";import{api as s}from"./axios.55a7e266.js";const d=n("Events",{state:()=>({subject:null,start:null,end:null,location:null,organizer:null,day:null,events:[]}),getters:{calendarEvents(){return this.events.map(t=>({id:t._id,title:t.subject,with:t.organizerName+" ("+t.organizerCompany+")",time:{start:new Date(t.start*1e3).toISOString().slice(0,16).replace("T"," "),end:new Date(t.end*1e3).toISOString().slice(0,16).replace("T"," ")},location:t.locationName,locationId:t.location,isEditable:!0,disableDnD:["month","week","day"],disableResize:["month","week","day"]}))}},actions:{async getEvents(){try{const t=await s.get("event",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});this.events=t.data.data}catch(t){a.create({message:"Chyba pri z\xEDskavan\xED udalost\xED: "+t,color:"warning",position:"top"})}},async createEvent(){const t=Date.parse(`${this.day}T${this.start}Z`)/1e3,r=Date.parse(`${this.day}T${this.end}Z`)/1e3,o=JSON.parse(localStorage.getItem("credentials"));console.log(o);const i={subject:this.subject,start:t.toString(),end:r.toString(),location:this.location.value,organizer:o.user._id};try{const e=await s.post("event",i,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});e.status===201?e.data.status==="error"&&e.data.code===400?a.create({message:"Nedostatok dostupn\xE9ho \u010Dasu na vytvorenie udalosti",color:"negative",position:"top"}):(a.create({message:"Udalos\u0165 vytvoren\xE1",color:"positive",position:"top"}),await this.getEvents()):a.create({message:"Chyba pri vytv\xE1ran\xED udalosti",color:"negative",position:"top"})}catch(e){a.create({message:"Chyba pri vytv\xE1ran\xED udalosti: "+e.message,color:"negative",position:"top"})}}}});export{d as u};
