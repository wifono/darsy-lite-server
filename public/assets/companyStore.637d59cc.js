import{k,a8 as ce,r as O,c as m,w as x,p as F,S as M,O as D,aa as me,h as b,ab as ue,g as $,l as Q,a5 as pe,ad as de,ae as o}from"./index.1eed2d83.js";import{k as he,u as ye,l as T,v as H,m as ge,a as ve,n as fe,b as we,o as be,p as Ce,q as Se,c as Te,r as ze,s as N,t as ke,w as j,x as L,y as $e}from"./ClosePopup.6300f75c.js";import{u as _,a as R}from"./QForm.0eeb3868.js";import{api as r}from"./axios.eb2250c4.js";var Oe=k({name:"QTooltip",inheritAttrs:!1,props:{...he,...ye,...T,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...T.transitionShow,default:"jump-down"},transitionHide:{...T.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:H},self:{type:String,default:"top middle",validator:H},offset:{type:Array,default:()=>[14,14],validator:ge},scrollTarget:ce,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ve],setup(e,{slots:a,emit:t,attrs:s}){let n,l;const y=$(),{proxy:{$q:c}}=y,u=O(null),h=O(!1),f=m(()=>L(e.anchor,c.lang.rtl)),Z=m(()=>L(e.self,c.lang.rtl)),W=m(()=>e.persistent!==!0),{registerTick:U,removeTick:V}=fe(),{registerTimeout:w}=we(),{transitionProps:G,transitionStyle:J}=be(e),{localScrollTarget:q,changeScrollEvent:K,unconfigureScrollTarget:X}=Ce(e,I),{anchorEl:p,canShow:Y,anchorEvents:g}=Se({showing:h,configureAnchorEl:ie}),{show:ee,hide:C}=Te({showing:h,canShow:Y,handleShow:te,handleHide:oe,hideOnRouteChange:W,processOnMount:!0});Object.assign(g,{delayShow:se,delayHide:ne});const{showPortal:E,hidePortal:P,renderPortal:ae}=ze(y,u,le,"tooltip");if(c.platform.is.mobile===!0){const i={anchorEl:p,innerRef:u,onClickOutside(d){return C(d),d.target.classList.contains("q-dialog__backdrop")&&pe(d),!0}},S=m(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);x(S,d=>{(d===!0?$e:N)(i)}),F(()=>{N(i)})}function te(i){E(),U(()=>{l=new MutationObserver(()=>v()),l.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),v(),I()}),n===void 0&&(n=x(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,v)),w(()=>{E(!0),t("show",i)},e.transitionDuration)}function oe(i){V(),P(),B(),w(()=>{P(!0),t("hide",i)},e.transitionDuration)}function B(){l!==void 0&&(l.disconnect(),l=void 0),n!==void 0&&(n(),n=void 0),X(),M(g,"tooltipTemp")}function v(){ke({targetEl:u.value,offset:e.offset,anchorEl:p.value,anchorOrigin:f.value,selfOrigin:Z.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function se(i){if(c.platform.is.mobile===!0){j(),document.body.classList.add("non-selectable");const S=p.value,d=["touchmove","touchcancel","touchend","click"].map(A=>[S,A,"delayHide","passiveCapture"]);D(g,"tooltipTemp",d)}w(()=>{ee(i)},e.delay)}function ne(i){c.platform.is.mobile===!0&&(M(g,"tooltipTemp"),j(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),w(()=>{C(i)},e.hideDelay)}function ie(){if(e.noParentEvent===!0||p.value===null)return;const i=c.platform.is.mobile===!0?[[p.value,"touchstart","delayShow","passive"]]:[[p.value,"mouseenter","delayShow","passive"],[p.value,"mouseleave","delayHide","passive"]];D(g,"anchor",i)}function I(){if(p.value!==null||e.scrollTarget!==void 0){q.value=me(p.value,e.scrollTarget);const i=e.noParentEvent===!0?v:C;K(q.value,i)}}function re(){return h.value===!0?b("div",{...s,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,J.value],role:"tooltip"},Q(a.default)):null}function le(){return b(ue,G.value,re)}return F(B),Object.assign(y.proxy,{updatePosition:v}),ae}});const qe={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},z={xs:2,sm:4,md:8,lg:16,xl:24};var xe=k({name:"QSeparator",props:{..._,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const a=$(),t=R(e,a.proxy.$q),s=m(()=>e.vertical===!0?"vertical":"horizontal"),n=m(()=>` q-separator--${s.value}`),l=m(()=>e.inset!==!1?`${n.value}-${qe[e.inset]}`:""),y=m(()=>`q-separator${n.value}${l.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(t.value===!0?" q-separator--dark":"")),c=m(()=>{const u={};if(e.size!==void 0&&(u[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const h=e.spaced===!0?`${z.md}px`:e.spaced in z?`${z[e.spaced]}px`:e.spaced,f=e.vertical===!0?["Left","Right"]:["Top","Bottom"];u[`margin${f[0]}`]=u[`margin${f[1]}`]=h}return u});return()=>b("hr",{class:y.value,style:c.value,"aria-orientation":s.value})}});const Ee=["ul","ol"];var Fe=k({name:"QList",props:{..._,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:a}){const t=$(),s=R(e,t.proxy.$q),n=m(()=>Ee.includes(e.tag)?null:"list"),l=m(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(s.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>b(e.tag,{class:l.value,role:n.value},Q(a.default))}});const Me=de("Company",{state:()=>({addCompanyForm:!1,addEmployeeForm:!1,editCompanyForm:!1,editEmployeeForm:!1,editPasswordForm:!1,configCompanyForm:!1,selectedCompanies:[],companies:[],employees:[],selectedEmployees:[],permissionsOptions:[{label:"\u017Diadne opr\xE1vnenia",value:null},{label:"Recepcia",value:"reception"},{label:"U\u017E\xEDvate\u013E",value:"user"},{label:"Admin",value:"admin"}],employeeName:null,employeeCompany:null,permissions:null,firstname:null,surname:null,name:null,email:null,password:null,allocatedTimeMonth:0,company:null,companyId:null,selectedEmployees:[],employeeId:null}),getters:{employeesData(){return this.employees.map(e=>({name:e.name,email:e.email,role:e.role,company:e.companyName}))},employeesSelect(){return this.employees.map(e=>({label:e.companyName?e.name+` (${e.email}) - ${e.companyName}`:e.name+` (${e.email})`,value:e._id}))},companySelect(){return this.companies.map(e=>({label:e.name,value:e._id}))},employeesForCompany:e=>a=>{const t=e.companies.find(s=>s._id===a);return t?t.employees.map(s=>e.employees.find(n=>n._id===s)).filter(Boolean):[]}},actions:{async getCompanies(){try{const e=await r.get("company",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});this.companies=e.data.data}catch{o.create({message:"Chyba pri z\xEDskavan\xED spolo\u010Dnost\xED: ",color:"warning",position:"top"})}},async getCompany(e){try{const a=await r.get(`company/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});this.company=a.data.name,this.companyId=e,this.allocatedTimeMonth=a.data.time,a.status===200&&(this.editCompanyForm=!0)}catch{o.create({message:"Chyba pri z\xEDskavan\xED spolo\u010Dnosti: ",color:"warning",position:"top"})}},async getEmployees(){try{const e=await r.get("users",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});this.employees=e.data.data}catch{o.create({message:"Chyba pri z\xEDskavan\xED zamestnancov: ",color:"warning",position:"top"})}},async addCompany(){try{(await r.post("company",{name:this.name,time:this.allocatedTimeMonth},{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).status===201&&(o.create({message:"Spolo\u010Dnos\u0165 pridan\xE1 ",color:"positive",position:"top"}),this.name="",this.allocatedTimeMonth=0,await this.getCompanies(),this.addCompanyForm=!1)}catch{o.create({message:"Chyba pri prid\xE1van\xED spolo\u010Dnosti: ",color:"warning",position:"top"})}},async updateCompany(){const e={name:this.company,time:this.allocatedTimeMonth};try{(await r.patch(`company/${this.companyId}`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).status===200&&(o.create({message:"Spolo\u010Dnos\u0165 aktualizovan\xE1",color:"positive",position:"top"}),await this.getCompanies(),this.editRoomForm=!1)}catch{o.create({message:"Chyba pri ukladan\xED spolo\u010Dnosti: ",color:"warning",position:"top"})}},async deleteCompany(e){try{(await r.delete(`company/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).status===200&&(o.create({message:"Spolo\u010Dnos\u0165 vymazan\xE1",color:"positive",position:"top"}),await this.getCompanies())}catch{o.create({message:"Chyba pri mazan\xED spolo\u010Dnosti: ",color:"warning",position:"top"})}},async assignEmployee(){const e=this.companyId,a={employees:this.selectedEmployees.map(t=>t.value)};try{const t=await r.patch(`company?company=${e}&assign=employees`,a,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});o.create({message:"Zamestnanci boli \xFAspe\u0161ne priraden\xED",color:"positive",position:"top"}),await this.getCompanies(),await this.getEmployees()}catch(t){console.error("Chyba pri prira\u010Fovan\xED zamestnancov:",t),o.create({message:"Chyba pri prira\u010Fovan\xED zamestnancov: ",color:"warning",position:"top"})}},async removeEmployeeFromCompany(e,a){try{await r.patch(`company?company=${e}&unassign=${a}`),o.create({message:"Zamestnanec bol \xFAspe\u0161ne odstr\xE1nen\xFD",color:"positive",position:"top"}),await this.getCompanies(),await this.getEmployees()}catch(t){console.error("Chyba pri odstra\u0148ovan\xED zamestnanca:",t),o.create({message:"Chyba pri odstra\u0148ovan\xED zamestnanca: ",color:"warning",position:"top"})}},async createEmployee(){try{const e={email:this.email,name:this.firstname+" "+this.surname,role:this.permissions.value,password:this.password};if(!e.email||!e.password||!e.name||!e.role)throw new Error("All fields are required");typeof this.employeeCompany!="undefined"&&this.employeeCompany!==""&&this.employeeCompany!==null&&(e.companyId=this.employeeCompany.value);const a=await r.post("users",e,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});o.create({message:"Zamestnanec bol \xFAspe\u0161ne vytvoren\xFD",color:"positive",position:"top"}),await this.getEmployees()}catch(e){console.error("Chyba pri vytv\xE1ran\xED zamestnanca:",e),o.create({message:"Chyba pri vytv\xE1ran\xED zamestnanca: ",color:"warning",position:"top"})}},async deleteEmployee(e){try{(await r.delete(`users/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).status===200&&(o.create({message:"Zamestnanec vymazan\xFD",color:"positive",position:"top"}),await this.getEmployees())}catch{o.create({message:"Chyba pri mazan\xED spolo\u010Dnosti: ",color:"warning",position:"top"})}},async updateEmployee(){var a,t,s,n;const e={};if(this.password&&this.password.length>0&&(e.password=this.password),((a=this.employeeCompany)==null?void 0:a.value)&&this.email&&this.firstname&&this.surname&&((t=this.permissions)==null?void 0:t.value)&&(e.companyId=(s=this.employeeCompany)==null?void 0:s.value,e.email=this.email,e.name=this.firstname+" "+this.surname,e.role=(n=this.permissions)==null?void 0:n.value),Object.keys(e).length===0){o.create({message:"Pros\xEDm, zadajte heslo, ak chcete zmeni\u0165 \xFAdaje.",color:"negative",position:"top"});return}try{await r.patch(`users/${this.employeeId}`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),o.create({message:"Zamestnanec upraven\xFD",color:"positive",position:"top"}),await this.getEmployees()}catch(l){console.error("Chyba pri upravovan\xED zamestnanca: ",l),o.create({message:"Chyba pri upravovan\xED zamestnanca.",color:"warning",position:"top"})}},async getEmployee(e){try{const a=await r.get(`users/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(a.status===200){const t=a.data.name.split(" ");this.editEmployeeForm=!0,this.employeeId=e,this.email=a.data.email,this.firstname=t[0],this.surname=t.slice(1).join(" "),this.employeeCompany={label:a.data.companyName,value:a.data.company};const s=this.permissionsOptions.find(n=>n.value===a.data.role);this.permissions=s?{label:s.label,value:s.value}:{label:"Nezn\xE1me opr\xE1vnenie",value:null}}}catch{o.create({message:"Chyba pri upravovan\xED zamestnanca: ",color:"warning",position:"top"})}}}});export{Fe as Q,Oe as a,xe as b,Me as u};
