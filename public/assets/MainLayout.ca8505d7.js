import{k as le,c as u,h as M,l as ve,i as _e,m as W,n as Se,r as V,w as h,p as xe,q as Ue,g as Ce,o as qe,t as pe,u as H,v as we,x as Be,y as B,z as je,f as r,A as i,B as p,C as L,D as R,E as b,Q as ae,F as Ee,G as Ke,H as Ze,I as $,J as Ge,K as j,L as F,R as E}from"./index.44e2cc04.js";import{Q as Je}from"./QScrollObserver.62b22911.js";import{u as Xe,a as Ye,b as et,c as tt,d as at,e as lt,f as ee,g as ot,Q as nt,h as rt,i as K,j as Z}from"./ClosePopup.c06d644a.js";import{u as ut,Q as st,a as G,b as te}from"./companyStore.e7f186e0.js";import{T as fe,Q as it}from"./QScrollArea.12e8c7ba.js";import{u as dt,a as ct}from"./QForm.7ac48cfa.js";import{Q as ft,a as vt}from"./QLayout.325eada0.js";import{u as Te}from"./userStore.cb638646.js";import{u as mt}from"./eventStore.b2a3c4c9.js";import{_ as ht}from"./UserPasswordForm.1771d375.js";import{_ as yt}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.7aa860db.js";var gt=le({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:d}){const s=u(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>M("div",{class:s.value},ve(d.default))}}),bt=le({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:d}){const s=u(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>M("div",{class:s.value,role:"toolbar"},ve(d.default))}}),pt=le({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:d,emit:s}){const{proxy:{$q:S}}=Ce(),l=_e(Se,W);if(l===W)return console.error("QHeader needs to be child of QLayout"),W;const y=V(parseInt(e.heightHint,10)),w=V(!0),f=u(()=>e.reveal===!0||l.view.value.indexOf("H")!==-1||S.platform.is.ios&&l.isContainer.value===!0),T=u(()=>{if(e.modelValue!==!0)return 0;if(f.value===!0)return w.value===!0?y.value:0;const o=y.value-l.scroll.value.position;return o>0?o:0}),P=u(()=>e.modelValue!==!0||f.value===!0&&w.value!==!0),a=u(()=>e.modelValue===!0&&P.value===!0&&e.reveal===!0),v=u(()=>"q-header q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(P.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),C=u(()=>{const o=l.rows.value.top,q={};return o[0]==="l"&&l.left.space===!0&&(q[S.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),o[2]==="r"&&l.right.space===!0&&(q[S.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),q});function g(o,q){l.update("header",o,q)}function m(o,q){o.value!==q&&(o.value=q)}function I({height:o}){m(y,o),g("size",o)}function k(o){a.value===!0&&m(w,!0),s("focusin",o)}h(()=>e.modelValue,o=>{g("space",o),m(w,!0),l.animate()}),h(T,o=>{g("offset",o)}),h(()=>e.reveal,o=>{o===!1&&m(w,e.modelValue)}),h(w,o=>{l.animate(),s("reveal",o)}),h(l.scroll,o=>{e.reveal===!0&&m(w,o.direction==="up"||o.position<=e.revealOffset||o.position-o.inflectionPoint<100)});const c={};return l.instances.header=c,e.modelValue===!0&&g("size",y.value),g("space",e.modelValue),g("offset",T.value),xe(()=>{l.instances.header===c&&(l.instances.header=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const o=Ue(d.default,[]);return e.elevated===!0&&o.push(M("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(M(Je,{debounce:0,onResize:I})),M("header",{class:v.value,style:C.value,onFocusin:k},o)}}});const ke=150;var wt=le({name:"QDrawer",inheritAttrs:!1,props:{...Xe,...dt,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Ye,"onLayout","miniState"],setup(e,{slots:d,emit:s,attrs:S}){const l=Ce(),{proxy:{$q:y}}=l,w=ct(e,y),{preventBodyScroll:f}=lt(),{registerTimeout:T,removeTimeout:P}=et(),a=_e(Se,W);if(a===W)return console.error("QDrawer needs to be child of QLayout"),W;let v,C=null,g;const m=V(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),I=u(()=>e.mini===!0&&m.value!==!0),k=u(()=>I.value===!0?e.miniWidth:e.width),c=V(e.showIfAbove===!0&&m.value===!1?!0:e.modelValue===!0),o=u(()=>e.persistent!==!0&&(m.value===!0||Ve.value===!0));function q(t,n){if(Qe(),t!==!1&&a.animate(),x(0),m.value===!0){const _=a.instances[X.value];_!==void 0&&_.belowBreakpoint===!0&&_.hide(!1),O(1),a.isContainer.value!==!0&&f(!0)}else O(0),t!==!1&&ie(!1);T(()=>{t!==!1&&ie(!0),n!==!0&&s("show",t)},ke)}function me(t,n){$e(),t!==!1&&a.animate(),O(0),x(D.value*k.value),de(),n!==!0?T(()=>{s("hide",t)},ke):P()}const{show:oe,hide:N}=tt({showing:c,hideOnRouteChange:o,handleShow:q,handleHide:me}),{addToHistory:Qe,removeFromHistory:$e}=at(c,N,o),J={belowBreakpoint:m,hide:N},Q=u(()=>e.side==="right"),D=u(()=>(y.lang.rtl===!0?-1:1)*(Q.value===!0?1:-1)),he=V(0),A=V(!1),ne=V(!1),ye=V(k.value*D.value),X=u(()=>Q.value===!0?"left":"right"),re=u(()=>c.value===!0&&m.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:k.value:0),ue=u(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(Q.value?"R":"L")!==-1||y.platform.is.ios===!0&&a.isContainer.value===!0),U=u(()=>e.overlay===!1&&c.value===!0&&m.value===!1),Ve=u(()=>e.overlay===!0&&c.value===!0&&m.value===!1),Le=u(()=>"fullscreen q-drawer__backdrop"+(c.value===!1&&A.value===!1?" hidden":"")),Me=u(()=>({backgroundColor:`rgba(0,0,0,${he.value*.4})`})),ge=u(()=>Q.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),Oe=u(()=>Q.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),ze=u(()=>{const t={};return a.header.space===!0&&ge.value===!1&&(ue.value===!0?t.top=`${a.header.offset}px`:a.header.space===!0&&(t.top=`${a.header.size}px`)),a.footer.space===!0&&Oe.value===!1&&(ue.value===!0?t.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(t.bottom=`${a.footer.size}px`)),t}),Ie=u(()=>{const t={width:`${k.value}px`,transform:`translateX(${ye.value}px)`};return m.value===!0?t:Object.assign(t,ze.value)}),Pe=u(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),De=u(()=>`q-drawer q-drawer--${e.side}`+(ne.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(w.value===!0?" q-drawer--dark q-dark":"")+(A.value===!0?" no-transition":c.value===!0?"":" q-layout--prevent-focus")+(m.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${I.value===!0?"mini":"standard"}`+(ue.value===!0||U.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(ge.value===!0?" q-drawer--top-padding":""))),Ae=u(()=>{const t=y.lang.rtl===!0?e.side:X.value;return[[fe,We,void 0,{[t]:!0,mouse:!0}]]}),Fe=u(()=>{const t=y.lang.rtl===!0?X.value:e.side;return[[fe,be,void 0,{[t]:!0,mouse:!0}]]}),He=u(()=>{const t=y.lang.rtl===!0?X.value:e.side;return[[fe,be,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function se(){Ne(m,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}h(m,t=>{t===!0?(v=c.value,c.value===!0&&N(!1)):e.overlay===!1&&e.behavior!=="mobile"&&v!==!1&&(c.value===!0?(x(0),O(0),de()):oe(!1))}),h(()=>e.side,(t,n)=>{a.instances[n]===J&&(a.instances[n]=void 0,a[n].space=!1,a[n].offset=0),a.instances[t]=J,a[t].size=k.value,a[t].space=U.value,a[t].offset=re.value}),h(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&se()}),h(()=>e.behavior+e.breakpoint,se),h(a.isContainer,t=>{c.value===!0&&f(t!==!0),t===!0&&se()}),h(a.scrollbarWidth,()=>{x(c.value===!0?0:void 0)}),h(re,t=>{z("offset",t)}),h(U,t=>{s("onLayout",t),z("space",t)}),h(Q,()=>{x()}),h(k,t=>{x(),ce(e.miniToOverlay,t)}),h(()=>e.miniToOverlay,t=>{ce(t,k.value)}),h(()=>y.lang.rtl,()=>{x()}),h(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Re(),a.animate())}),h(I,t=>{s("miniState",t)});function x(t){t===void 0?pe(()=>{t=c.value===!0?0:k.value,x(D.value*t)}):(a.isContainer.value===!0&&Q.value===!0&&(m.value===!0||Math.abs(t)===k.value)&&(t+=D.value*a.scrollbarWidth.value),ye.value=t)}function O(t){he.value=t}function ie(t){const n=t===!0?"remove":a.isContainer.value!==!0?"add":"";n!==""&&document.body.classList[n]("q-body--drawer-toggle")}function Re(){C!==null&&clearTimeout(C),l.proxy&&l.proxy.$el&&l.proxy.$el.classList.add("q-drawer--mini-animate"),ne.value=!0,C=setTimeout(()=>{C=null,ne.value=!1,l&&l.proxy&&l.proxy.$el&&l.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function We(t){if(c.value!==!1)return;const n=k.value,_=ee(t.distance.x,0,n);if(t.isFinal===!0){_>=Math.min(75,n)===!0?oe():(a.animate(),O(0),x(D.value*n)),A.value=!1;return}x((y.lang.rtl===!0?Q.value!==!0:Q.value)?Math.max(n-_,0):Math.min(0,_-n)),O(ee(_/n,0,1)),t.isFirst===!0&&(A.value=!0)}function be(t){if(c.value!==!0)return;const n=k.value,_=t.direction===e.side,Y=(y.lang.rtl===!0?_!==!0:_)?ee(t.distance.x,0,n):0;if(t.isFinal===!0){Math.abs(Y)<Math.min(75,n)===!0?(a.animate(),O(1),x(0)):N(),A.value=!1;return}x(D.value*Y),O(ee(1-Y/n,0,1)),t.isFirst===!0&&(A.value=!0)}function de(){f(!1),ie(!0)}function z(t,n){a.update(e.side,t,n)}function Ne(t,n){t.value!==n&&(t.value=n)}function ce(t,n){z("size",t===!0?e.miniWidth:n)}return a.instances[e.side]=J,ce(e.miniToOverlay,k.value),z("space",U.value),z("offset",re.value),e.showIfAbove===!0&&e.modelValue!==!0&&c.value===!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",!0),qe(()=>{s("onLayout",U.value),s("miniState",I.value),v=e.showIfAbove===!0;const t=()=>{(c.value===!0?q:me)(!1,!0)};if(a.totalWidth.value!==0){pe(t);return}g=h(a.totalWidth,()=>{g(),g=void 0,c.value===!1&&e.showIfAbove===!0&&m.value===!1?oe(!1):t()})}),xe(()=>{g!==void 0&&g(),C!==null&&(clearTimeout(C),C=null),c.value===!0&&de(),a.instances[e.side]===J&&(a.instances[e.side]=void 0,z("size",0),z("offset",0),z("space",!1))}),()=>{const t=[];m.value===!0&&(e.noSwipeOpen===!1&&t.push(H(M("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),Ae.value)),t.push(we("div",{ref:"backdrop",class:Le.value,style:Me.value,"aria-hidden":"true",onClick:N},void 0,"backdrop",e.noSwipeBackdrop!==!0&&c.value===!0,()=>He.value)));const n=I.value===!0&&d.mini!==void 0,_=[M("div",{...S,key:""+n,class:[Pe.value,S.class]},n===!0?d.mini():ve(d.default))];return e.elevated===!0&&c.value===!0&&_.push(M("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(we("aside",{ref:"content",class:De.value,style:Ie.value},_,"contentclose",e.noSwipeClose!==!0&&m.value===!0,()=>Fe.value)),M("div",{class:"q-drawer-container"},t)}}});const kt={class:"row no-wrap q-pa-md",style:{display:"flex","flex-direction":"column",padding:"2em",width:"20em"}},_t={style:{"list-style-type":"none",padding:"0"}},St={style:{"font-weight":"600"}},xt={style:{"font-weight":"600"}},Ct={style:{"font-weight":"600"}},qt={style:{"font-weight":"600"}},Bt={__name:"UserInfo",setup(e){const d=Te();ot(),mt();const s=ut(),S=Be(),l=()=>{const w=d.info.user._id;s.employeeId=w,s.editPasswordForm=!0},y=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("credentials"),localStorage.removeItem("company"),S.push("/login")};return(w,f)=>(B(),je(Ee,null,[r(ae,{color:"gray",icon:"person",flat:"",rounded:""},{default:i(()=>[r(nt,null,{default:i(()=>[p("div",kt,[p("div",null,[p("ul",_t,[p("li",null,[f[1]||(f[1]=L(" Meno: ")),p("span",St,R(b(d).user),1)]),p("li",null,[f[2]||(f[2]=L(" E-mail: ")),p("span",xt,R(b(d).email),1)]),p("li",null,[f[3]||(f[3]=L(" Opr\xE1vnenia: ")),p("span",Ct,R(b(d).role),1)]),p("li",null,[f[4]||(f[4]=L(" Spolo\u010Dnos\u0165: ")),p("span",qt,R(b(d).userCompany?b(d).userCompany:"Bez spolo\u010Dnosti"),1)]),f[5]||(f[5]=p("li",null,null,-1))])]),r(ae,{color:"gray",icon:"password",flat:"",label:"Zmena hesla",push:"",size:"small",onClick:l}),r(ae,{color:"negative",icon:"logout",flat:"",label:"Odhl\xE1si\u0165 sa",push:"",size:"small",onClick:y})])]),_:1})]),_:1}),r(rt,{modelValue:b(s).editPasswordForm,"onUpdate:modelValue":f[0]||(f[0]=T=>b(s).editPasswordForm=T)},{default:i(()=>[r(ht)]),_:1},8,["modelValue"])],64))}};const Tt={class:"userInfo",style:{display:"flex","align-items":"center","justify-content":"center"}},Qt={style:{"padding-right":"0.5em","font-size":"0.8em"}},$t={__name:"MainLayout",setup(e){const d=Be(),s=Ke(),S=V(!0),l=Te(),y=()=>{d.push("/")},w=()=>{d.push("/rooms")},f=()=>{d.push("/companies")},T=()=>{d.push("/employees")},P=()=>{const a=!s.dark.isActive;s.dark.set(a),localStorage.setItem("theme",a?"dark":"light");const v=d.currentRoute.value.fullPath;d.push({path:"/refresh"}).then(()=>{d.replace({path:v})})};return qe(async()=>{await l.getUser();const a=localStorage.getItem("theme");s.dark.set(a==="dark")}),(a,v)=>{const C=Ze("router-view");return B(),$(ft,{view:"hHh lpR fFf"},{default:i(()=>[r(pt,null,{default:i(()=>[r(bt,{class:Ge(["flex-toolbar",{"q-dark":b(s).dark.isActive}])},{default:i(()=>[r(ae,{flat:"",dense:"",icon:"menu",onClick:v[0]||(v[0]=g=>S.value=!S.value)}),r(gt,{class:"row",style:{"align-items":"center",padding:"0.3em","justify-content":"space-between"}},{default:i(()=>[v[2]||(v[2]=p("img",{src:"/nov_novelogo.png",style:{cursor:"pointer"}},null,-1)),p("div",Tt,[p("span",Qt,"Vitaj, "+R(b(l).user),1),r(Bt)])]),_:1})]),_:1},8,["class"])]),_:1}),r(wt,{dark:b(s).dark.mode,modelValue:S.value,"onUpdate:modelValue":v[1]||(v[1]=g=>S.value=g),width:50,breakpoint:500,side:"left",bordered:!0},{default:i(()=>[r(it,{class:"fit"},{default:i(()=>[r(st,{class:"drawer-list"},{default:i(()=>[H((B(),$(K,{onClick:y,clickable:""},{default:i(()=>[r(Z,{avatar:""},{default:i(()=>[r(j,{name:"event"})]),_:1}),r(G,{anchor:"center end",self:"center middle"},{default:i(()=>v[3]||(v[3]=[L(" Kalend\xE1r ")])),_:1})]),_:1})),[[E]]),r(te),b(l).role==="admin"?H((B(),$(K,{key:0,onClick:w,clickable:""},{default:i(()=>[r(Z,{avatar:""},{default:i(()=>[r(j,{name:"meeting_room"})]),_:1}),r(G,{anchor:"center end",self:"center middle"},{default:i(()=>v[4]||(v[4]=[L(" Miestnosti ")])),_:1})]),_:1})),[[E]]):F("",!0),b(l).role==="admin"?(B(),$(te,{key:1})):F("",!0),b(l).role==="admin"?H((B(),$(K,{key:2,onClick:T,clickable:""},{default:i(()=>[r(Z,{avatar:""},{default:i(()=>[r(j,{name:"people"})]),_:1}),r(G,{anchor:"center end",self:"center middle"},{default:i(()=>v[5]||(v[5]=[L(" Zamestnanci ")])),_:1})]),_:1})),[[E]]):F("",!0),b(l).role==="admin"?(B(),$(te,{key:3})):F("",!0),b(l).role==="admin"?H((B(),$(K,{key:4,onClick:f,clickable:""},{default:i(()=>[r(Z,{avatar:""},{default:i(()=>[r(j,{name:"business"})]),_:1}),r(G,{anchor:"center end",self:"center middle"},{default:i(()=>v[6]||(v[6]=[L(" Spolo\u010Dnosti ")])),_:1})]),_:1})),[[E]]):F("",!0),b(l).role==="admin"?(B(),$(te,{key:5})):F("",!0),H((B(),$(K,{onClick:P,clickable:""},{default:i(()=>[r(Z,{avatar:""},{default:i(()=>[r(j,{name:b(s).dark.mode?"light_mode":"dark_mode"},null,8,["name"])]),_:1}),r(G,{anchor:"center end",self:"center middle"},{default:i(()=>[L(R(b(s).dark.mode?"Svetl\xFD re\u017Eim":"Tmav\xFD re\u017Eim"),1)]),_:1})]),_:1})),[[E]])]),_:1})]),_:1})]),_:1},8,["dark","modelValue"]),r(vt,null,{default:i(()=>[r(C)]),_:1})]),_:1})}}};var Nt=yt($t,[["__scopeId","data-v-259fe117"]]);export{Nt as default};
